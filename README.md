# Vgv Challenge

![coverage][coverage_badge]
[![style: very good analysis][very_good_analysis_badge]][very_good_analysis_link]
[![License: MIT][license_badge]][license_link]

Generated by the [Very Good CLI][very_good_cli_link] ü§ñ

A Very Good Project created by Very Good CLI which follows [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/).

## Project Summary

This Flutter application allows users to discover random coffee images from the internet and mark their favorites to view anytime, even offline. Users can fetch a new image if they don't like the current one or save it if they do. This app uses the free [coffee API](https://coffee.alexflipnote.dev).

### Features

- **Offline First**: Stores favorite coffee images locally for offline access.
- **API Fetching**: Pulls coffee images from the network.
- **File Management**: Saves and retrieves favorite images on the device.
- **High Test Coverage**: Includes unit, widget, and integration tests.
- **Integration Tests**: Validates end-to-end user flows across platforms.

### Roadmap
- ***Bump Coverage >95%***: Add more comprehensive tests to reach or exceed 95% coverage.
- ***Finish Integration Tests***: Enhance and finalize end-to-end testing to cover all major user interactions.
- ***Add Golden Tests***: Ensure visual consistency by adding golden image tests for widgets.

### Architecture
- Check out more information about this app's architecture [here](./lib/architecture.md).

---

## Getting Started üöÄ

This project contains 3 flavors:

- development
- staging
- production

To run the desired flavor either use the launch configuration in VSCode/Android Studio or use the following commands:

```sh
# Development
$ flutter run --flavor development --target lib/main_development.dart

# Staging
$ flutter run --flavor staging --target lib/main_staging.dart

# Production
$ flutter run --flavor production --target lib/main_production.dart
```

_\*Vgv Challenge is tested on iOS and Android._

_\*It's reccomended to run flutter run once before using an IDE such as VSCode._

---

## Running Tests üß™

This project provides a comprehensive testing suite, including unit, widget, and integration tests.  The tests are designed to ensure code quality and prevent regressions.  Coverage reports are generated to help identify areas that need more testing.

**Prerequisites**

- **Flutter SDK:**  Make sure you have the Flutter SDK installed and configured.
- **lcov:** This script installs `lcov` automatically (on macOS and Linux) if it's not already present.  `lcov` is used to generate coverage reports. If you are on a different OS, install `lcov` using your system's package manager.
- **remove_from_coverage:** The `remove_from_coverage` package is activated globally.  This is used to exclude generated files (like those from `freezed` and `json_serializable`) from the coverage reports, providing a more accurate picture of your code's test coverage.

**Running Tests for a Specific Module**

To run tests for the app, use the `run-tests.sh` script:


```bash
# Run tests and generate Code Coverage Report
chmod +x ./scripts/run-tests.sh
./scripts/run-tests.sh .

# Open Coverage Report
$ open coverage/index.html

# Also, run the integration test by using this command:
flutter test integration_test/app_user_flow_integration_test.dart --flavor staging
```

---

## Working with Translations üåê

This project relies on [flutter_localizations][flutter_localizations_link] and follows the [official internationalization guide for Flutter][internationalization_link].


### Generating Translations

To use the latest translations changes, you will need to generate them:

1. Generate localizations for the current project:

```sh
flutter gen-l10n --arb-dir="lib/l10n/arb"
```

Alternatively, run `flutter run` and code generation will take place automatically.

[coverage_badge]: coverage_badge.svg
[flutter_localizations_link]: https://api.flutter.dev/flutter/flutter_localizations/flutter_localizations-library.html
[internationalization_link]: https://flutter.dev/docs/development/accessibility-and-localization/internationalization
[license_badge]: https://img.shields.io/badge/license-MIT-blue.svg
[license_link]: https://opensource.org/licenses/MIT
[very_good_analysis_badge]: https://img.shields.io/badge/style-very_good_analysis-B22C89.svg
[very_good_analysis_link]: https://pub.dev/packages/very_good_analysis
[very_good_cli_link]: https://github.com/VeryGoodOpenSource/very_good_cli
